name: Actions
on:
    push

jobs:
    forgeTests:
        name: Run forge tests
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
              with:
                submodules: recursive

            - name: Install dependencies
              run: yarn install --frozen-lockfile

            - name: Install Foundry
              uses: foundry-rs/foundry-toolchain@v1
              with:
                version: nightly

            - name: Run tests
              run: forge test -vvv

    build:
        name: Run build
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2

            - name: Install dependencies
              run: yarn install

            - name: Compile contracts
              run: yarn build

    lint:
        name: Run lints
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2

            - name: Install dependencies
              run: yarn install

            - name: Run Prettier
              run: yarn run lint

    test:
        name: Run tests
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2

            - name: Install dependencies
              run: yarn install

            - name: Compile contracts
              run: yarn build
            
            - name: Test contracts
              run: yarn test

